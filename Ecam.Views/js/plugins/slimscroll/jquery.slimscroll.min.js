(function(f){jQuery.fn.extend({slimScroll:function(g){var a=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px",animate:!0},g);this.each(function(){function w(d){if(u){d=
d||window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&h(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function h(d,f,g){k=!1;var e=d,h=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),h),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-
c.outerHeight());e=l*(b[0].scrollHeight-b.outerHeight());g&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),h),c.css({top:d+"px"}));"scrollTo"in a&&a.animate?b.animate({scrollTop:e}):b.scrollTop(e);b.trigger("slimscrolling",~~e);x();q()}function D(){window.addEventListener?(this.addEventListener("DOMMouseScroll",w,!1),this.addEventListener("mousewheel",w,!1)):document.attachEvent("onmousewheel",w)}function y(){v=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),30);c.css({height:v+
"px"});var a=v==b.outerHeight()?"none":"block";c.css({display:a})}function x(){y();clearTimeout(B);l==~~l?(k=a.allowPageScroll,C!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;C=l;v>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&m.stop(!0,!0).fadeIn("fast"))}function q(){a.alwaysVisible||(B=setTimeout(function(){a.disableFadeOut&&u||z||A||(c.fadeOut("slow"),m.fadeOut("slow"))},1E3))}var u,z,A,B,n,v,l,C,k=!1,b=f(this);b.css("-ms-touch-action","none");if(b.parent().hasClass(a.wrapperClass)){var p=
b.scrollTop(),c=b.parent().find("."+a.barClass),m=b.parent().find("."+a.railClass);y();if(f.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto");b.css("height","auto");var r=b.parent().parent().height();b.parent().css("height",r);b.css("height",r)}if("scrollTo"in g)p=parseInt(a.scrollTo);else if("scrollBy"in g)p+=parseInt(a.scrollBy);else if("destroy"in g){c.remove();m.remove();b.unwrap();return}h(p,!1,!0)}}else{a.height="auto"==g.height?b.parent().height():g.height;
p=f("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var m=f("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,
position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),r="right"==a.position?{right:a.distance}:{left:a.distance};m.css(r);c.css(r);b.wrap(p);b.parent().append(c);b.parent().append(m);a.railDraggable&&c.bind("mousedown",function(a){var b=f(document);A=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=
t+a.pageY-pageY;c.css("top",currTop);h(0,c.position().top,!1)});b.bind("mouseup.slimscroll",function(a){A=!1;q();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});window.navigator.msPointerEnabled&&(b.bind("MSPointerDown",function(a,b){n=a.originalEvent.pageY}),b.bind("MSPointerMove",function(b){b.originalEvent.preventDefault();h((n-b.originalEvent.pageY)/a.touchScrollStep,!0);n=b.originalEvent.pageY}));m.hover(function(){x()},
function(){q()});c.hover(function(){z=!0},function(){z=!1});b.hover(function(){u=!0;x();q()},function(){u=!1;q()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(n=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&(h((n-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),n=b.originalEvent.touches[0].pageY)});y();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),h(0,!0)):"top"!==
a.start&&(h(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());D()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
