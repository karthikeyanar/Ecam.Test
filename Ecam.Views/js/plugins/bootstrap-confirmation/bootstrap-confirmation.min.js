(function(c){function f(b){var c=window;b=b.split(".");for(var a=b.pop(),e=0,d=b.length;e<d;e++)c=c[b[e]];return function(){c[a].call(this)}}if(!c.fn.popover)throw Error("Confirmation requires popover.js");var d=function(b,d){this.init("confirmation",b,d);var a=this;this.options.selector||(this.$element.attr("href")&&(this.options.href=this.$element.attr("href"),this.$element.removeAttr("href"),this.$element.attr("target")&&(this.options.target=this.$element.attr("target"))),this.$element.on(a.options.trigger,
function(a,c){c||(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())}),this.$element.on("confirmed.bs.confirmation",function(b){c(this).trigger(a.options.trigger,[!0])}),this.$element.on("show.bs.confirmation",function(b){a.options.singleton&&c(a.options._selector).not(c(this)).filter(function(){return void 0!==c(this).data("bs.confirmation")}).confirmation("hide")}));this.options._isDelegate||(this.eventBody=!1,this.uid=this.$element[0].id||this.getUID("group_"),this.$element.on("shown.bs.confirmation",
function(b){a.options.popout&&!a.eventBody&&(c(this),a.eventBody=c("body").on("click.bs.confirmation."+a.uid,function(b){c(a.options._selector).is(b.target)||(c(a.options._selector).filter(function(){return void 0!==c(this).data("bs.confirmation")}).confirmation("hide"),c("body").off("click.bs."+a.uid),a.eventBody=!1)}))}))};d.DEFAULTS=c.extend({},c.fn.popover.Constructor.DEFAULTS,{placement:"top",title:"Are you sure?",html:!0,href:!1,popout:!0,singleton:!0,target:"_self",onConfirm:c.noop,onCancel:c.noop,
btnOkClass:"btn-xs btn-primary",btnOkIcon:"glyphicon glyphicon-ok",btnOkLabel:"Yes",btnCancelClass:"btn-xs btn-default",btnCancelIcon:"glyphicon glyphicon-remove",btnCancelLabel:"No",template:'<div class="popover confirmation"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content text-center"><div class="btn-group"><a class="btn" data-apply="confirmation"></a><a class="btn" data-dismiss="confirmation"></a></div></div></div>'});d.prototype=c.extend({},c.fn.popover.Constructor.prototype);
d.prototype.constructor=d;d.prototype.getDefaults=function(){return d.DEFAULTS};d.prototype.init=function(b,d,a){c.fn.popover.Constructor.prototype.init.call(this,b,d,a);this.options._isDelegate=!1;a.selector?this.options._selector=this._options._selector=a._root_selector+" "+a.selector:a._selector?(this.options._selector=a._selector,this.options._isDelegate=!0):this.options._selector=a._root_selector;""==this.options._selector&&(this.options._selector="[data-toggle='confirmation']")};d.prototype.setContent=
function(){var b=this,d=this.tip(),a=this.options;d.find(".popover-title")[a.html?"html":"text"](this.getTitle());d.find('[data-apply="confirmation"]').addClass(a.btnOkClass).html(a.btnOkLabel).prepend(c("<i></i>").addClass(a.btnOkIcon)," ").off("click").one("click",function(a){b.getOnConfirm.call(b).call(b.$element);b.$element.trigger("confirmed.bs.confirmation");b.leave(b)});a.href&&"#"!=a.href&&d.find('[data-apply="confirmation"]').attr({href:a.href,target:a.target});d.find('[data-dismiss="confirmation"]').addClass(a.btnCancelClass).html(a.btnCancelLabel).prepend(c("<i></i>").addClass(a.btnCancelIcon),
" ").off("click").one("click",function(a){b.getOnCancel.call(b).call(b.$element);b.$element.trigger("canceled.bs.confirmation");b.leave(b)});d.removeClass("fade top bottom left right in");d.find(".popover-title").html()||d.find(".popover-title").hide()};d.prototype.getOnConfirm=function(){return this.$element.attr("data-on-confirm")?f(this.$element.attr("data-on-confirm")):this.options.onConfirm};d.prototype.getOnCancel=function(){return this.$element.attr("data-on-cancel")?f(this.$element.attr("data-on-cancel")):
this.options.onCancel};var g=c.fn.confirmation;c.fn.confirmation=function(b){var f="object"==typeof b&&b||{};f._root_selector=this.selector;return this.each(function(){var a=c(this),e=a.data("bs.confirmation");if(e||"destroy"!=b)if(e||a.data("bs.confirmation",e=new d(this,f)),"string"==typeof b)e[b]()})};c.fn.confirmation.Constructor=d;c.fn.confirmation.noConflict=function(){c.fn.confirmation=g;return this}})(jQuery);
